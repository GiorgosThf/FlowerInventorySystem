@using System.Globalization
@model Edit.FlowerEditModel

@{
  var f = Model.Flower;
  var modalId = Model.ModalId;
}

<div class="modal fade" id="@modalId" tabindex="-1" aria-labelledby="@modalId-ttl" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 id="@modalId-ttl" class="modal-title">Edit “@f.Name”</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <form method="post"
            enctype="multipart/form-data"
            asp-page="/Flowers/Edit"
            asp-page-handler="EditFlower">

        <div class="modal-body">
          <input type="hidden" name="Input.Id" value="@f.Id"/>
          <input type="hidden" name="Input.PublicId" value="@f.PublicId"/>

          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Name</label>
              <input name="Input.Name" value="@f.Name" class="form-control"/>
            </div>
            <div class="col-md-6">
              <label class="form-label">Type</label>
              <input name="Input.Type" value="@f.Type" class="form-control"/>
            </div>

            <div class="col-md-4">
              <label class="form-label">Price</label>
              <input name="Input.Price"
                     type="number" step="0.01"
                     value="@f.Price.ToString("0.##", CultureInfo.InvariantCulture)"
                     class="form-control"/>
            </div>
            <div class="col-md-4">
              <label class="form-label">SKU</label>
              <input name="Input.Sku" value="@(f.Sku ?? "")" class="form-control"/>
            </div>
            <div class="col-md-4">
              <label class="form-label">Stock</label>
              <input name="Input.StockQuantity" type="number" value="@f.StockQuantity" class="form-control"/>
            </div>

            <div class="col-md-8">
              <label class="form-label">Category</label>
              <select name="Input.CategoryId" class="form-select">
                @foreach (var c in Model.Categories)
                {
                  <option value="@c.Id" selected="@(f.CategoryId == c.Id)">@c.Name</option>
                }
              </select>
            </div>

            <div class="col-md-4">
              <label class="form-label d-block">Status</label>
              <div class="form-check">
                <input class="form-check-input" type="checkbox"
                       name="Input.IsActive" value="true" @(f.IsActive ? "checked" : null)/>
                <label class="form-check-label">Active</label>
              </div>
            </div>

            <div class="col-12">
              <label class="form-label">Description</label>
              <textarea name="Input.Description" rows="3" class="form-control">@(f.Description ?? "")</textarea>
            </div>

            <div class="col-12">
              <label class="form-label">Replace image (optional)</label>
              <input type="file" name="Image" accept="image/*" class="form-control"/>
              <div class="form-text">PNG/JPG, up to 5 MB.</div>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn btn-primary" type="submit"><i class="bi bi-save me-1"></i> Save</button>
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
